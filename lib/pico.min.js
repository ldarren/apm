(function(r,e,t){var n,i=Date.now(),u={},a={},o={},s={build:"dev"},c={},f=".js",l=function(r){return s[r]},h=function(){},p=function(){arguments[arguments.length-1]()},d=function(r,e,t){if(u[r]&&!x(u[r]))return u[r];var n=y(r)||f,i=c[n];switch(i&&(e=i(r,e)),n){case f:var o,s={exports:{}},l={},h=e.call(t?{}:l,s.exports,D,s,d,(function(r){return o=D(r)}),S)||s.exports;return o&&(h=j(h,o)),"function"==typeof h&&(h.extend=k),l.load&&l.load(h),l.update&&(a[r]=[l.update,h]),r?u[r]=w(u[r],h):h;case".json":try{return u[r]=JSON.parse(e)}catch(e){return console.error(r,e.message)}default:return u[r]=e}},v={run:h,inherit:h,reload:h,parse:h,define:d,import:h,export:h,env:l,ajax:h},g="undefined"==typeof requestAnimationFrame?function(r){return setTimeout(r,100)}:requestAnimationFrame,y=function(r){if(!r)return null;var e=r.lastIndexOf(".");return-1!==e&&-1===r.indexOf("/",e)?r.substr(e):null},b=function(r,e){if(!r.length)return e();m(r.shift(),(function(t){if(t)return e(t);b(r,e)}))},m=function(r,e){if(u[r]=u[r]||S.import(r),u[r])return e(null,u[r]);var t=r.indexOf("/"),n=~t?o[r.slice(0,t)]:0,i=n?r.slice(t+1):r;(n=n||o["~"]||"")instanceof Function?n(i,(function(t,n){if(t)return e(t);E(r,n,e)})):S.ajax("get",n+i+(y(r)?"":f),null,null,(function(t,n,i){if(4===n)return t?e(t):void E(r,i,e)}))},A=function(r){return Object.defineProperties(Function("return arguments.callee.__proto__.apply(this,arguments)"),{name:{value:r},i:{value:i}})},x=function(r){return"function"==typeof r&&i===r.i},w=function(r,e){return r&&r!==e?(x(r)&&(r.prototype=e.prototype),r.__proto__=e,r):e},O=function(r){return x(r)?r.__proto__:r},k=function(r,e){return r?j(r,this,e):this},j=function(r,e,t){var n,i,u=O(r),a=O(e),o=typeof u,s=typeof a;switch(o){case"function":n=u,i=u.prototype;break;case"object":if(o===s)return u.__proto__=a,u;n=function(){return a.apply(this,arguments)},i=u;break;default:return u}switch(Object.assign(n,a,O(t)),s){case"function":return n.prototype=Object.assign(Object.create(a.prototype),i,{constructor:a}),n;case"object":return n.prototype=Object.assign(Object.create(a),i),n;default:return u}},D=function(r,e){var t=u[r];return void 0===t?e?m(r,e):u[r]=A(r):(e&&setTimeout(e,0,null,t),t)},E=function(r,e,t){if(t=t||h,u[r])return t(null,u[r]);if(f!==(y(r)||f))return t(null,d(r,e));var n=[],i=function(r,e,t,n){n=n||v;var i=r?'"use strict";\n'+e+("prod"===s.build?"":"//# sourceURL="+r):e,a=function(r){return u[r]||t.push(r),u[r]};try{var o=Function("exports","require","module","define","inherit","pico",i)}catch(e){return console.error(r,e.message)}return o.call({},{},a,{},d,a,n),o}(r,e,n);r&&(u[r]=A(r)),b(n,(function(e){if(e)return t(e);t(null,d(r,i))}))},T=function(r){var e;for(var t in a)(e=a[t])&&e[0](e[1],r);g(T)},S=r[e]={run:function(r,e){var t;for(var i in S.ajax=r.ajax||S.ajax,o=r.paths||o,s=r.env||s,c=r.preprocessors||c,n=r.importRule,u)(t=c[y(i)||f])&&(u[i]=t(i,u[i]));(r.onLoad||p)((function(){E(r.name||null,function(r){return r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))}(e.toString()),(function(r,e){if(r)return console.error(r);e&&e(),g(T)}))}))},reload:function(r,e,t){"function"==typeof e&&(t=e),t=t||h;var n=function(e,n){if(e)return t(e);t(null,u[r]=w(u[r],n))};delete u[r],t===e?m(r,n):E(r,e,n)},parse:E,define:d,import:function(r){if(Array.isArray(n)&&n.some((function(e){return e.match(r)})))return t(r)},export:D,env:l};d("pico/func",(function(r,e,t,n,i,u){function a(r,e){for(var t,n=e[0],i=[],u=0;t=e[u];u++)i.push(t.toString());return{typeName:n.getTypeName(),functionName:n.getFunctionName(),methodName:n.getMethodName(),fileName:n.getFileName(),line:n.getLineNumber(),column:n.getColumnNumber(),evalOrigin:n.getEvalOrigin(),isTopLevel:n.isToplevel(),isEval:n.isEval(),isNative:n.isNative(),isConstructor:n.isConstructor(),trace:i}}return{reflect:function r(e,t){var n=Error.prepareStackTrace,i=Error.stackTraceLimit;Error.prepareStackTrace=a,Error.stackTraceLimit=t||1;var u=new Error;Error.captureStackTrace(u,e||r);var o=u.stack;return Error.stackTraceLimit=i,Error.prepareStackTrace=n,o}}})),d("pico/json",(function(r,e,t,n,i,u){return{parse:function(r,e){return JSON.parse(r[0],(function(t,n){switch(t[0]){case"$":if(e)return JSON.parse(r[n]);case"_":return r[n];default:return n}}))},stringify:function(r,e){var t=[];return t.unshift(JSON.stringify(r,(function(r,n){switch(r[0]){case"$":if(e)return t.push(JSON.stringify(n));case"_":return t.push(n);default:return n}}))),t},path:function(r){var e=r;function t(r,e){return e<0?(r.length||0)+e:e}function n(r,e){if(r&&e&&"object"==typeof e){if(e[r])return e[r];for(var t,i,u=[],a=Object.keys(e),o=0;i=a[o];o++)(t=n(r,e[i]))&&(Array.isArray(t)?u.push.apply(u,t):u.push(t));return u.length?u:void 0}}return function r(){if(!arguments.length)return e;var i=Array.isArray(e);switch(typeof arguments[0]){case"string":var u=arguments[0];switch(u){default:if(i){if(!e[0][u])break;e=e.map((function(r){return r[u]}))}else{if(!e[u])break;e=e[u]}break;case"..":e=n(arguments[1],e)||e;break;case"*":if(i)break;e=Object.keys(e).map((function(r){return e[r]}))}break;case"object":var a=arguments[0];if(!Array.isArray(a))break;e=a.map((function(r){return e[t(e,r)]}));break;case"number":for(var o=t(e,arguments[0]),s=t(e,arguments[1])||e.length-1||0,c=arguments[2]||1,f=[],l=[],h=o;h<=s;h+=c)f.push(e[h]),l.push(h);e=f;break;case"function":var p=arguments[0];e=i?e.map(p):p(e)}return Array.isArray(e)&&(e=e.filter((function(r){return null!=r}))),1===e.length&&(e=e.pop()),r}}}})),d("pico/obj",(function(r,e){var t=e("pico/time"),n=e("pico/str"),i=Math.random,u=Math.round,a=Math.ceil,o=Math.floor,s=["false","0","no"],c=["object","function"],f=["nstructor"],l="$",h={ref:function(r,e,t,n){return p(this,r,e,t,n)},spec:function(r,e,t,n,i){var u={obj:p(this,r,e,t,n)},a={};return x(l,{type:"object",spec:{obj:i}},u,a,u,null,e),a.obj},bool:function(r,e,t,n,i){return(p(this,r,e,t,n)?1:0)^(i?1:0)},eq:function(r,e,t,n,i,u,a){var o=p(this,r,e,t,n),s=p(this,r,e,i,u),c=a?1:0;return Array.isArray(s)?(s.includes(o)?1:0)^c:(o===s?1:0)^c},map:function(r,e,t,n,i,u,a){var o=p(this,r,e,i);if(o){var s=o[p(this,r,e,t,n)];return u?p(s,r,s,u,a):s}},now:function(r,e,t,n){var i=p(this,r,e,t,n||0);return new Date(Date.now()+i)},call:function(r,e,t,n,...i){var u=p(this,r,e,t,n);if(u&&u.apply){for(var a=[],o=0,s=i.length;o<s;o+=2)a.push(p(this,r,e,i[o],i[o+1]));return u.apply(null,a)}}};function p(r,e,t,n,i){if(!n)return v(r,n,i);switch(n[0]){case l:return v(r,n.slice(1),i);case"_":return v(t,n.slice(1),i);case".":return v(e,n.slice(1),i);default:return v(r,n,i)}}function d(r,e){if(e&&r)for(var t,n,i=0;n=e[i];i++)if(void 0!==(t=r[n]))return t}function v(r,e,t){if(!r||!e||!Array.isArray(e))return t;var n=r;try{for(var i,u=0,a=e.length;u<a;u++)i=e[u],n=Array.isArray(i)?d(n,i):n[i]}catch(r){return t}return void 0===n?t:n}function g(r){return!r||r instanceof Date?-1:c.indexOf(typeof r)}function y(r,e,t){return null!=e&&r>=e||null!=t&&r<=t?1:0}function b(r,e,t){r&&void 0!==t&&(l===e?Array.isArray(r)?r.push.apply(r,t):r&&r.constructor===Object?Object.assign(r,t):r=t:Array.isArray(r)?r.push(t):r[e]=t)}function m(r,e){return l===e?r:r?r[e]:void 0}function A(r,e,t){return function(n,i){if(Array.isArray(n)){var u=n[0];u&&h[u]&&(n=h[u].call(r,e,t,...n.slice(1)))}return void 0===n?i:n}}function x(r,e,n,i,c,f,l){var h=A(c,f,l),p=h(e),d=h(p.alias,r),v=h(p.type,p);if(!v||!v.includes)return d;if(null==n){if(void 0===n&&h(p.required))return d;n=h(p.value,n)}Array.isArray(p.map)&&(n=h(["map",null,n].concat(p.map)));var g=typeof n;if(v.includes("bool"))b(i,d,"string"===g?n&&!s.includes(n.toLowerCase()):!!n);else{if(null==n)return h(p.notnull)?d:void b(i,d,n);if(Array.isArray(v))return v.includes(n)?void b(i,d,n):d;var w;switch(v){case"string":if(v!==g){if(!p.force)return d;n=JSON.stringify(n)}if(y(n.length,h(p.lt),h(p.gt))||!RegExp(h(p.regex)).test(n))return d;b(i,d,n);break;case"number":if(n=parseFloat(n),!isFinite(n))return d;if(p.int)switch(p.int){case"d":case"f":n=o(n);break;case"u":case"c":n=a(n);break;default:n=u(n)}if(y(n,h(p.lt),h(p.gt)))return d;b(i,d,n);break;case"date":if(!(n=t.convert(n,h(p.formats))).getTime()||y(n.getTime(),h(p.lt),h(p.gt)))return d;b(i,d,n);break;case"object":if(void 0!==(w=function(r,e,t,n,i,u){if(e.type!==typeof t||Array.isArray(t))return r;var a=A(i,t,u)(e.spec);if(a){b(n,r,{});for(var o,s,c=m(n,r),f=Object.keys(a),l=0;s=f[l];l++)if(void 0!==(o=x(s,a[s],t[s],c,i,t,u)))return[r,o].join(".")}else b(n,r,Object.assign({},t))}(d,p,n,i,c,l)))return w;break;case"array":if(void 0!==(w=function(r,e,t,n,i,u){var a=A(i,t,u);if(e.sep&&t&&t.split&&(t=t.split(a(e.sep))),!Array.isArray(t)){if(!a(e.force))return r;t=[t]}if(y(t.length,a(e.lt),a(e.gt)))return r;b(n,r,[]);var o,s,c,f,l=m(n,r),h=a(e.specs),p=0;if(h)for(s=h.length;p<s;p++)if(f=t[p],void 0!==(c=x(p,o=h[p],f,l,i,t,u)))return[r,c].join(".");if(o=a(e.spec)){for(s=t.length;p<s;p++)if(void 0!==(c=x(p,o,f=t[p],l,i,t,u)))return[r,c].join(".")}else l&&Array.prototype.push.apply(l,t.slice())}(d,p,n,i,c,l)))return w;break;case"null":b(i,d,null==n?p.value||null:n);break;default:return d}}}function w(r,e){return r+u(i()*(e-r))}function O(r,e){return w(r+1,e-1)}function k(r,e){var t=A(null,null,e),i=t(r),u=t(i.type,i);if(!t(i.required)&&1>w(0,100))return t(i.value);if(!t(i.notnull)&&1>w(0,100))return null;switch(u){case"number":return O(t(i.gt,-10),t(i.lt,10));case"string":return i.regex?e.randex(t(i.regex)):n.rand(O(t(i.gt,0),t(i.lt,10)),t(i.sep));case"boolean":case"bool":return 1===w(0,1);case"date":return new Date(O(t(i.gt,Date.now()-2592e6),t(i.lt,Date.now()+2592e6)));case"object":return function(r,e){var t={};if(!r)return t;for(var n,i=Object.keys(r),u=0;n=i[u];u++)t[n]=k(r[n],e);return t}(t(i.spec),e);case"array":return function(r,e){var t=A(null,null,e),n=[];if(!r)return n;for(var i=O(t(r.gt,0),t(r.lt,10)),u=0;u<i;u++)n.push(k(r.spec,e));return n}(i,e);case"null":return null;default:return Array.isArray(u)?u[w(0,u.length-1)]:void 0}}function j(r,e){if(e)return 1&e&&void 0===r||2&e&&null===r?1:void 0}return{extend:function r(e,t,n){var i=g(e),u=g(t);1===i&&(i=g(e.__proto__)),1===u&&(u=g(t.__proto__));var a,o,s=(n=n||{}).tidy;if(!e||null===t||-1===u&&u===i)return j(t,s)?e:t;if(1===u)return u===i&&(t.prototype=e),t;if(Array.isArray(t))if(n.mergeArr){var c,l,h={};for(c=0,l=(e=e||[]).length;c<l;c++)j(o=e[c],s)||(h[o]=o);for(c=0,l=t.length;c<l;c++)j(o=t[c],s)||(h[o]=o);for(a in e=[],h)e.push(h[a])}else e=t;else for(a in e=e||{},t)o=t[a],~f.indexOf(a)||j(o,s)||(e[a]=r(e[a],o,n));return e},extends:function(r,e,t){for(var n,i=this.extend,u=0;n=e[u];u++)r=i(r,n,t);return r},dot:v,validate:function(r,e,t,n){return x(l,r,e,t,e,null,n)},create:k,has:function(r,e){return Object.prototype.hasOwnProperty.call(r,e)}}})),d("pico/str",(function(){var r=Math.random,e=Math.ceil,t=Math.min,n=/<%([\s\S]*?)%>/g,i=/(^( )?(async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|finally|for|function|if|import|let|return|super|switch|throw|try|var|while|with|yield|{|}|;))(.*)?/g,u="/",a=[58,42];function o(r,e,t){if(!e)return"";if(e.includes(" "))return e;if(t=t||0,-1!==(r.DYN||a).indexOf(e.charCodeAt(t)))return"?";var n=e.indexOf(r.SEP||u,t);return-1===n?e.slice(t):e.slice(t,n+1)}function s(r,e,t,n){if(!e)return"";t=t||0;var i=e.indexOf(r.SEP||u,t);return-1===i?e.slice(t):e.slice(t,i+(n?1:0))}function c(r,e,t,n,i){return e[i=i||o(r,t[0],0)]=[t,n],e}function f(r,e,t,n){if(t=t||[],null==e)return t;if((n=n||0)>=e.length)return n||t.length||t.push(e.slice(n)),t;if(-1!==e.indexOf(" "))return t.push(e.slice(n)),t;var i=e.indexOf(r.PARAM||":",n);if(-1===i)return-1===(i=e.indexOf(r.CAPTURE||"*",n))?(t.push(e.slice(n)),t):(t.push(e.slice(n,i)),t.push(e.slice(i)),t);n!==i&&t.push(e.slice(n,i));var a=e.indexOf(r.SEP||u,i);return-1===a?(t.push(e.slice(i)),t):(t.push(e.slice(i,a)),f(r,e,t,a))}function l(r,e,t){for(var n,i,u=r.DYN||a,o=e.length,s=0;s<o;s++)if((n=e[s])!==(i=t[s])&&(-1===u.indexOf(n.charCodeAt(0))||-1===u.indexOf(i.charCodeAt(0))))return s;return o===t.length?null:o}function h(r,e,t){for(var n,i,a=r.SEP||u,o=e.length,s=0;s<o;s++){if((i=e[s])!==t[s])return n;a===i&&(n=s+1)}return o===t.length?null:n}function p(r,e,t){var n=[];if(null==e)return n;if(!(n=r.splice(e)).length||!t)return n;var i=n.shift(t);return r.push(i.slice(0,t)),i.length!==t&&n.unshift(i.slice(t)),n}function d(r,e,t,n){if(1!==t.length||-1!==(r.DYN||a).indexOf(t[0].charCodeAt(0))){var i=o(r,t[0],0),u=e[i];if(!u)return c(r,e,t,n,i);var s=u[0],f=u[1],v=l(r,s,t);if(null==v){if(f.slice)return;return d(f,"",[],n)}var g=h(r,s[v]||"",t[v]);v+(g&&g<s[v].length?0:1)<s.length?f=u[1]=c(r,{},p(s,v,g),f):f.slice&&(f=u[1]=c(r,{},[],f)),d(r,f,p(t,v,g),n)}else c(r,e,t,n,t[0])}function v(r,e,t,n,i){var u=e[s(r,t,i,1)]||e["?"];if(u){var a=u[0],o=u[1];if(a){for(var c,f,l=i,h=0;c=a[h];h++)switch(c.charAt(0)){case":":if(f=s(r,t,i,0),n[c.slice(1)]=f,i+=f.length,(f=o[t.slice(i)])&&f[1].charAt)return f[1];break;case"*":return f=t.slice(i),n[c.slice(1)]=f,i+=f.length,o;default:if(i!==t.indexOf(c,i))return;i+=c.length}if(l===i)return}return i===t.length&&o.charAt?o:v(r,o,t,n,i)}}function g(r,e){r=Object.assign({SEP:u,PARAM:":",CAPTURE:"*"},r),this.SEP=r.SEP,this.PARAM=r.PARAM,this.CAPTURE=r.CAPTURE,this.DYN=[r.PARAM.charCodeAt(0),r.CAPTURE.charCodeAt(0)],this.tree=e||{}}function y(r,e,t){return(e=e.trim())?r+=t?e.match(i)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"":r}return g.prototype={add:function(r){d(this,this.tree,f(this,r,[],0),r)},match:function(r,e){if(r||r.charAt){var t=this.tree,n=t[r];return n&&n[0].length<2&&n[1].charAt?n[1]:v(this,t,r,e=e||{},0)}},build:function(r,e){for(var t,n=f(this,r,[],0),i="",u=this.DYN||a,o=0;t=n[o];o++)-1===u.indexOf(t.charCodeAt(0))?i+=t:i+=e[t.slice(1)];return i}},{codec:function(r,e){for(var t,n=0,i="";t=e.charCodeAt(n);n++)i+=String.fromCharCode(t^r);return i},hash:function(r){for(var e,t=0,n=0;e=r.charCodeAt(t);t++)n=(n<<3)-n+e|0;return n},rand:function(n,i){i=i||"",n=t(n||10,512);for(var u=e((n+i.length)/10),a=[],o=0;o<u;o++)a.push(r().toString(36).substr(2));return a.join(i).substring(0,n)},pad:function(r,e,t){return this.tab(r,e,t)+r},tab:function(r,e,t){var n=e-String(r).length+1;return Array(n>0?n:0).join(t||"0")},isBase36:function(r){return r>=48&&r<=57||r>=65&&r<=94||r>=97&&r<=126},template:function(r){for(var e,t,i="var r=[];\n",u=0;e=n.exec(r);)i=y(i,r.slice(u,e.index)),i=y(i,e[1],!0),u=e.index+e[0].length;return i=y(i,r.substr(u,r.length-u)),t=new Function("pico","d",(i+'return r.join("");').replace(/[\r\t\n]/g," ")),function(r){return t(S,r)}},Radix:g,compare:l,lastCommonSep:h,tokenizer:f}})),d("pico/time",(function(r,e){var t=e("pico/str"),n=Math.max,i=Math.min,u=Math.floor,a=Math.ceil,o=36e5,s=24*o,c=function(r,e){return(new Date(r)-new Date(e))/s},f=function(r,e,t){var n=e?1:0,i=new Date(r.getFullYear()+(t||0),0,1),u=(7-i.getDay())%7+n,o=c(r,i);return o>u?a((o-u)/7):f(r,e,-1)},l=function(r,e,t){var u=r.split("/"),a=u[0];return"*"===a?u[0]=e:(a=parseInt(a),a=n(e,a),a=i(t,a),u[0]=a),1===u.length?u.push(0):u[1]=parseInt(u[1]),u},h=function(r,e,t){if("*"===r)return 0;for(var n,i,u,a,o,s,c,f=[],h=r.split(","),p=0;n=h[p];p++)if(u=n.split("-"),a=l(u[0],e,t),1!==u.length)if(o=l(u[1],e,t),i=a[0],s=o[0],c=o[1]||1,i>s)for(;i>=s;i-=c)f.push(i);else for(;i<=s;i+=c)f.push(i);else if(c=a[1])for(i=a[0];i<=t;i+=c)f.push(i);else f.push(a[0]);return f.sort((function(r,e){return r-e})),f},p=function(r,e,t){if(!e)return r;if(n.apply(Math,e.concat(r))===r)return t+i.apply(Math,e);for(var u=0,a=e.length;u<a;u++)if(e[u]>=r)return e[u];console.error("not suppose to be here",r,e,t)},d=function(r,e,t,n,i,a,c,f,l){if(e++>3)return l(0);var h=p(r.getMinutes(),t,60),v=p(r.getHours()+u(h/60),n,24),g=r.getDate(),y=r.getMonth(),b=r.getFullYear(),m=new Date(b,y+1,0).getDate();if(c){var A=r.getDay();g+=p(A,c,7)-A+u(v/24)}else g=p(g+u(v/24),i,m);if(y=p(y+1+u(g/(m+1)),a,12),r.getMonth()+1!==y)return d(new Date(b,y-1),e,t,n,i,a,c,f,l);if(b=p(b+u((y-1)/12),f,0),r.getFullYear()!==b)return d(new Date(b,y-1),e,t,n,i,a,c,f,l);var x=new Date(b,(y-1)%12).getTime();return x+=(g%(m+1)-1)*s,x+=v%24*o,l(x+=h%60*6e4)};return{parse:function(r){var e=r.split(" ");if(e.length<6)return 0;var t=h(e[0],0,59);if(null==t)return 0;var n=h(e[1],0,23);if(null==n)return 0;var i=h(e[2],1,31);if(null==i)return 0;var u=h(e[3],1,12);if(null==u)return 0;var a=h(e[4],0,6);if(null==a)return 0;var o=h(e[5],1975,2075);return null==o?0:[t,n,i,u,a,o]},nearest:function(r,e,t,n,i,u,a){return a=a||Date.now(),d(new Date(a+9e4),0,r,e,t,n,i,u,(function(r){return r}))},daynum:c,weeknum:f,day:function(r,e,t,n){t=t||["Yesterday","Today","Tomorrow",{weekday:"long"},{weekday:"short",month:"short",day:"numeric"}],n=n||new Date;var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),12,0,0)-r,u=1.5*s;return i>=0&&i<=u||i<=0&&i>-u?n.getDate()===r.getDate()?t[1]:n>r?t[0]:t[2]:(e=e||"en-US",n.getFullYear()===r.getFullYear()&&f(n)===f(r)?r.toLocaleDateString(e,t[3]):r.toLocaleDateString(e,t[4]))},convert:function r(e,n,i){if(i=i||0,!Array.isArray(n)||i>=n.length||!e.slice)return new Date(e);for(var u,a,o,s=n[i++],c={},f=0,l=e.length,h=0;f<l;f++){if(a!==(u=t.isBase36(e.charCodeAt(f)))){if(h>=s.length)break;o=s[h++]}if(u)c[o]?c[o]+=e[f]:c[o]=e[f];else if(o!==e[f])return r(e,n,i);a=u}var p=new Date(`${c.M} ${c.D} ${c.Y} ${e.slice(f)}`);return p.getTime()?p:new Date(e)}}})),d("pico/web",(function(r,e,t,n,i,u){var a=e("pico/json"),o=Math.floor,s=Math.random,c=void 0,f="ack",l=!0,h=function(r,e,t){r.append(e,t)},p=function(r,e,t){r[e]=t},d=function(r,e,t,n){switch(r&&4===e&&console.error(r),e){case 2:n.head=null,n.currPT=1,n.resEndPos=0}if(t){var i,u=n.resEndPos,o=-1,s=n.delimiter,c=s.length,l=n.body;try{for(;-1!==(o=t.indexOf(s,u));){switch(n.currPT){case 1:n.head=JSON.parse(t.substring(u,o)),l.length=0,n.currPT=2;break;case 2:l.push(t.substring(u,o))}if((i=n.head)&&i.len===l.length){if(n.currPT=1,i.resId&&n.request(f,{resId:i.resId}),!i.reqId)return console.error("incomplete response header: "+JSON.stringify(i));i.len&&(i.data=a.parse(l,!0)),n.inbox.push(i),n.head=null}u=o+c}}catch(r){console.error(r)}n.resEndPos=4===e?0:u}},v=function(r,e,t,n,i){n=n||"",i=i||"";for(var u,a,o,s,c=r instanceof FormData?h:p,f=e.baseURI,l=0,d=e.elements;s=d[l];l++)if(s.hasAttribute("name"))if("FILE"===(u=s.hasAttribute("type")?s.getAttribute("type").toUpperCase():"TEXT"))for(a=0,o=s.files.length;a<o;c(r,n+s.name,s.files[a++]));else("RADIO"!==u&&"CHECKBOX"!==u||s.checked)&&c(r,n+s.name,s.value);if(t)for(var v in t)c(r,i+v,t[v]);return f=f.substring(0,f.lastIndexOf("/")+1),e.action.substr(f.length)},g=function(r,e){r.url=e.url||r.url,r.delimiter=e.delimiter?JSON.stringify(e.delimiter):r.delimiter};function y(r){if(!r.url)return console.error("url is not set");g(this,Object.assign({delimiter:["&"]},r)),this.reqId=1+o(1e3*s()),this.inbox=[],this.outbox=[],this.uploads=[],this.callbacks={},this.acks=[],this.reqs=[],this.resEndPos=0,this.head=null,this.body=[],this.currPT=1}return y.prototype={beat:function(){if(this.inbox.length)for(var r,e,t,n=this.inbox,i=this.callbacks;t=n.pop();)(e=i[r=t.reqId])&&(delete i[r],e(t.error,t.data));if(l&&(this.uploads.length||this.outbox.length||this.acks.length)){var a=this.uploads,o=this.outbox,s=this.acks;if(a.length)u.ajax("post",this.url,a.shift(),c,d,this);else{var f=this.reqs=s.concat(o);s.length=o.length=0,u.ajax("post",this.url,f.join(this.delimiter)+this.delimiter,c,d,this)}}},reconnect:function(r,e){var t;g(this,r),(t=this).resEndPos=t.outbox.length=t.acks.length=0,t.currPT=1},submit:function(r,e,t){if(!("undefined"!=typeof window&&r&&r instanceof HTMLFormElement))return console.error("No HTMLFormElement submitted");var n=0;t&&(n=this.reqId++,this.callbacks[n]=t);var i=new FormData;i.append("api",v(i,r,e,"data/","cred/")),i.append("reqId",n),this.uploads.push(i)},request:function(r,e,t,n){switch(arguments.length){case 2:e instanceof Function&&(n=e,e=t=void 0);break;case 3:t instanceof Function&&(n=t,t=void 0);break;case 4:break;default:return console.error("wrong request params!")}if("undefined"!=typeof window&&e instanceof HTMLFormElement){var i={};r=v(i,e),e=i}if(!r)return console.error("Missing api,  data["+JSON.stringify(e)+"]");var u=this.acks;if(r!==f&&(u=this.outbox).length){var o=u.shift();-1===o.indexOf(r)&&u.unshift(o)}var s=0;n&&(s=this.reqId++,this.callbacks[s]=n);var c=e?a.stringify(e,!0):[];c.unshift(JSON.stringify(t)),c.unshift(JSON.stringify({api:r,reqId:s,len:c.length})),u.push(c.join(this.delimiter))}},{create:function(r,e){var t=new y(r);return c={headers:{"Content-Type":"text/plain;boundary="+t.delimiter}},e&&e(null,t),t},online:function(){l=!0},offline:function(){l=!1}}}))}).apply(null,"object"==typeof module?[module,"exports",require]:[window,"pico"]);
//# sourceMappingURL=bin/pico.min.js.map